<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<script type="text/javascript">

function dl() {
   
        var content = document.getElementById("sampleInputedList");
        var blob = new Blob([ content ], { "type" : "text/plain" });
    
        if (window.navigator.msSaveBlob) { 
            window.navigator.msSaveBlob(blob, "map.xml"); 
            window.navigator.msSaveOrOpenBlob(blob, "map.xml"); 
        } else {
            document.getElementById("download").href = window.URL.createObjectURL(blob);
        }

    }
    
  function copyToClipboard() {
        // コピー対象をJavaScript上で変数として定義する
        var copyTarget = document.getElementById("sampleInputedList");
        // コピー対象のテキストを選択する
        copyTarget.select();
        // 選択しているテキストをクリップボードにコピーする
        document.execCommand("Copy");
        // コピーをお知らせする
        alert("クリップボードに保存しました");
 }
    
function buildData() {
   var name = document.getElementById('mapName').value;
   var version = document.getElementById('mapVersion').value;
   var author = document.getElementById('mapAuthor').value;
   var subtitle = document.getElementById('mapSubtitle').value;
   var desc = document.getElementById('mapDesc').value;
    
   var gametime = document.getElementById('mapGameTime').value;
    
   var startfeather = document.getElementById('mapStartFeather').value;
   var startbone = document.getElementById('mapStartBone').value;
   var startegg = document.getElementById('mapStartEgg').value;
    
   var rejailfeather = document.getElementById('mapRejailFeather').value;
   var rejailbone = document.getElementById('mapRejailBone').value;
   var rejailegg = document.getElementById('mapRejailEgg').value;
  
   var rejaillimit = document.getElementById('mapRejailLimit').value;
   var autoend = document.getElementById('mapAutoEnd').value;
   var autorejail = document.getElementById('mapAutoRejail').value;
   var watch = document.getElementById('mapWatch').value;
   var field = document.getElementById('mapField').value;
   var opgtp = document.getElementById('mapOPGTP').value;
    
    var xml = "";
    xml += '<map>\n';
    xml += '   <name>' + name + '</name>\n';
    xml += '   <version>' + version + '</version>\n';
    xml += '   <authors>\n';
    xml += '      <author>' + author + '</author>\n';
    xml += '   </authors>\n';
    xml += '   <subtitle>' + subtitle + '</subtitle>\n';
    xml += '   <desc>' + desc + '</desc>\n';
    xml += '   <time>' + gametime + '</time>\n';
    xml += '   <start>\n';
    xml += '      <feather>' + startfeather + '</feather>\n';
    xml += '      <bone>' + startbone + '</bone>\n';
    xml += '      <egg>' + startegg + '</egg>\n';
    xml += '   </start>\n';
    xml += '   <rejail>\n';
    xml += '      <feather>' + rejailfeather + '</feather>\n';
    xml += '      <bone>' + rejailbone + '</bone>\n';
    xml += '      <egg>' + rejailegg + '</egg>\n';
    xml += '   </rejail>\n';
    xml += '   <rejailcount>' + rejaillimit + '</rejailcount>\n';
    xml += '   <auto_end>' + autoend + '</auto_end>\n';
    xml += '   <auto_rejail>' + autorejail + '</auto_rejail>\n';
    xml += '   <watch>' + watch + '</watch>\n';
    xml += '   <climate>' + field + '</climate>\n';
    xml += '   <opg_tp>' + opgtp + '</opgtp>\n';
    xml += '</map>\n';
    
    document.getElementById('sampleInputedList').value = xml;
}
    
</script>

<body>
  <div id="wrapper">
    <div class="container"> <img src="https://project-rfm.net/public/images/rfm/title.png" style="width:100%;height:auto;" /><br>
      <div class="content">
        <div class="card-deck">
          <div class="card">
            <div class="card-header">
              <h3>マップ設定</h3>
            </div>
            <div class="card-body">
              <form id="sampleForm">
                  
                  <div class="form-group">
                   マップ名<input type="text"  class="form-control" name="formName" id="mapName" value="TestMap"> 
                   </div>
                  
                  <div class="form-group">
                    バージョン<input type="text" class="form-control" name="formVersion" id="mapVersion" value="1.0.0"> 
                  </div>
                  
                   <div class="form-group">
                      製作者<input type="text" class="form-control" name="formAuthor" id="mapAuthor" value="p_rfm"> 
                   </div>
                  
                   <div class="form-group">
                       サブタイトル<input type="text" class="form-control" id="mapSubtitle" value="テストマップから逃げ切れ!!!"> 
                   </div>
                  
                  <div class="form-group">
                       マップ説明<textarea class="form-control" id="mapDesc">これはテストのマップです。,広いです。,狭いかも</textarea>
                      <small class="form-text text-muted">コンマ(,)で改行。セクション(§)でカラーコードを設定可能</small>
                   </div>
                  
                </form>
            </div>
          </div>
          <hr/>
         <div class="card">
            <div class="card-header">
              <h3>ゲーム設定</h3>
            </div>
            <div class="card-body">
              <form id="sampleForm">
                 <div class="form-group">
                    <label>復活可能回数</label></br>
                     <input type="number" min="1" max="15" id="mapRejailLimit" value="10" class="form-control">
                </div>
                  <div class="form-group">
                      ゲーム時間<input type="number" class="form-control" min="10" id="mapGameTime" value="25"> 
                   </div>
                  <div class="form-group">
                      ゲーム自動終了
                      <select name="formArea" id="mapAutoEnd" class="form-control">
            　　　　　　　　　　　　　<option selected>true</option>
            　　　　　　　　　　　　　<option>false</option>
       　　　　　　　　</select>
                      <small id="mapStartItem" class="form-text text-muted">逃走者が0人になった時ゲームを終了するかを設定します。</small>
                    </div>
                   <div class="form-group">
                      自動復活
                       <select name="formAge" id="mapAutoRejail" class="form-control">
            　　　　　　　　　　　　　<option selected>true</option>
            　　　　　　　　　　　　　<option>false</option>
        　　　　　　　　　</select>
                   </div>
                
                  <div class="form-group">
                      観戦/Watch
                       <select id="mapWatch" class="form-control">
            　　　　　　　　　　<option selected>true</option>
            　　　　　　　　　　<option>false</option>
        　　　　　　　　 </select>
                    </div>
                
                 <div class="form-group">
                      フィールド/Field
                      <input type="number" class="form-control" min="0" max="2" id="mapField" value="0">
                     <small class="form-text text-muted">0:平穏 1:温暖 2:寒冷 指定以外の数値は強制的に平穏になります</small>
                 </div>
                
                <div class="form-group">
                      OPG-Teleport
                       <select id="mapOPGTP" class="form-control">
            　　　　　　　　　　<option selected>false</option>
            　　　　　　　　　　<option>true</option>
        　　　　　　　　 </select>
                    <small class="form-text text-muted">オープニングゲーム終了時に強制的にTPを行うかの設定</small>
                 </div>

                </form>
            </div>
          </div>

        <div class="card">
            <div class="card-header">
              <h3>アイテム設定</h3>
            </div>
            <div class="card-body">
              <form id="sampleForm">
                  <div class="form-group">
                    <label>ゲーム開始時</label></br>
                      羽: <input type="number" min="0" max="10" id="mapStartFeather" value="10" class="form-control"> 
                      骨: <input type="number" min="0" max="10" id="mapStartBone" value="10" class="form-control"> 
                      卵: <input type="number" min="0" max="10" id="mapStartEgg" value="10" class="form-control">
                      <small id="mapStartItem" class="form-text text-muted">ゲーム開始時に配布されるアイテムの個数です。ゲームバランスを考えて設定してください。</small>
                   </div>
                  <div class="form-group">
                    <label>復活時</label></br>
                      羽: <input type="number" min="0" max="10" id="mapRejailFeather" value="10" class="form-control"> 
                      骨: <input type="number" min="0" max="10" id="mapRejailBone" value="10" class="form-control"> 
                      卵: <input type="number" min="0" max="10" id="mapRejailEgg" value="10" class="form-control">
                <small id="mapRejailItem" class="form-text text-muted">復活時に配布されるアイテムの個数です。開始時よりも多くならないように設定してください。</small>
                   </div>
                </form>
            </div>
          </div>
            
        </div>
      </div>
     </br>
     <form>
         <button type="button" class="btn btn-success btn-lg btn-block" onclick="buildData();">Xmlに変換</button>
      </form>
        
       <div class="content">
        <div class="card-deck">
          <div class="card">
            <div class="card-header">
              <h3>map.xml</h3>
            </div>
            <div class="card-body">
          <form>
            <div id="sampleOutput"> 
               <textarea  class="form-control" rows="20" id="sampleInputedList" readonly></textarea> 
                <button type="button" class="btn btn-success" onclick="copyToClipboard()">コピーする</button> 
                <button id="download" download="map.xml" type="button" class="btn btn-warning" onclick="dl()">ダウンロード</button> 
                <a id="download" href="#" download="map.xml" onclick="dl()">ダウンロード</a>
             </div>
          </form>
        </div>
              </div>
            </div>
           </div>
      </div>
    </div>
  </div>


 <footer>
     <p align="center">
          &copy; 2015-2019 project-rfm. All rights reserved. | <a href="{{site.baseurl}}/rfm/rule">利用規約</a> | <a href="{{site.baseurl}}/rfm/credit">credit</a><br>
           Minecraft は Mojang Synergies AB の登録商標です。本サイトはMojang Synergies ABとは関係ありません。<br>
       <a href="https://twitter.com/share" class="twitter-share-button" data-url="{{site.baseurl}}">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
      </p><br><br>    
  </footer>

</body>
